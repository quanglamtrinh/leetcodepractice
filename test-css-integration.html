<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novel Editor CSS Integration Test</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="novel-editor.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8fafc;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
            overflow: hidden;
        }

        .test-header {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 24px;
            text-align: center;
        }

        .test-section {
            margin: 24px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #fafafa;
        }

        .test-section h3 {
            margin-top: 0;
            color: #374151;
            font-weight: 600;
        }

        .responsive-test {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .device-frame {
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 12px;
            background: white;
            text-align: center;
        }

        .device-frame h4 {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: #6b7280;
        }

        .desktop-frame {
            width: 100%;
        }

        .tablet-frame {
            width: 768px;
            max-width: 100%;
        }

        .mobile-frame {
            width: 375px;
            max-width: 100%;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-pass {
            background-color: #10b981;
        }

        .status-fail {
            background-color: #ef4444;
        }

        .status-warn {
            background-color: #f59e0b;
        }

        .test-results {
            margin-top: 16px;
            padding: 16px;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 6px;
        }

        .notes-panel-demo {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 16px;
        }

        @media (max-width: 768px) {
            .responsive-test {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="test-container">
        <div class="test-header">
            <h1>Novel Editor CSS Integration Test</h1>
            <p>Testing CSS imports, theme integration, and responsive behavior</p>
        </div>

        <div class="test-section">
            <h3>1. CSS Import Verification</h3>
            <div id="css-import-results">
                <p>Checking CSS imports...</p>
            </div>
        </div>

        <div class="test-section">
            <h3>2. Theme Integration Test</h3>
            <div class="notes-panel-demo">
                <div class="novel-notes-tab">
                    <div class="flex justify-between items-center mb-4">
                        <div class="notes-header">
                            <span class="text-lg font-medium">üìù Notes</span>
                            <span class="ml-2 text-sm text-green-600 flex items-center">
                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                        clip-rule="evenodd" />
                                </svg>
                                Saved!
                            </span>
                        </div>

                        <div class="flex gap-2">
                            <button
                                class="flex items-center gap-2 px-3 py-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                                Save
                            </button>
                            <button
                                class="flex items-center gap-2 px-3 py-2 text-sm bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                                Clear Notes
                            </button>
                        </div>
                    </div>

                    <div class="novel-editor-container border border-gray-300 rounded-lg p-4 min-h-[400px]">
                        <div class="novel-editor">
                            <div class="prose">
                                <h1>Sample Heading 1</h1>
                                <p>This is a sample paragraph to test the Novel editor styling integration with the
                                    application theme.</p>

                                <h2>Code Example</h2>
                                <pre><code>def two_sum(nums, target):
    hash_map = {}
    for i, num in enumerate(nums):
        complement = target - num
        if complement in hash_map:
            return [hash_map[complement], i]
        hash_map[num] = i
    return []</code></pre>

                                <h3>Key Points</h3>
                                <ul>
                                    <li>Time complexity: O(n)</li>
                                    <li>Space complexity: O(n)</li>
                                    <li>Uses hash map for efficient lookup</li>
                                </ul>

                                <blockquote>
                                    This approach is much more efficient than the brute force O(n¬≤) solution.
                                </blockquote>

                                <p>Additional notes with <code>inline code</code> formatting.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="theme-integration-results" class="test-results">
                <p>Theme integration test results will appear here...</p>
            </div>
        </div>

        <div class="test-section">
            <h3>3. Responsive Behavior Test</h3>
            <div class="responsive-test">
                <div class="device-frame desktop-frame">
                    <h4>Desktop (1200px+)</h4>
                    <div id="desktop-test">Testing...</div>
                </div>
                <div class="device-frame tablet-frame">
                    <h4>Tablet (768px)</h4>
                    <div id="tablet-test">Testing...</div>
                </div>
                <div class="device-frame mobile-frame">
                    <h4>Mobile (375px)</h4>
                    <div id="mobile-test">Testing...</div>
                </div>
            </div>
            <div id="responsive-results" class="test-results">
                <p>Responsive behavior test results will appear here...</p>
            </div>
        </div>

        <div class="test-section">
            <h3>4. Visual Consistency Check</h3>
            <div id="visual-consistency-results" class="test-results">
                <p>Visual consistency test results will appear here...</p>
            </div>
        </div>
    </div>

    <script>
        // CSS Import Verification
        function checkCSSImports() {
            const results = [];

            // Check if novel-editor.css styles are applied
            const testElement = document.createElement('div');
            testElement.className = 'novel-editor-container';
            document.body.appendChild(testElement);

            const computedStyle = window.getComputedStyle(testElement);

            if (computedStyle.fontFamily.includes('apple-system') || computedStyle.fontFamily.includes('BlinkMacSystemFont')) {
                results.push('<span class="status-indicator status-pass"></span>Novel editor font family applied');
            } else {
                results.push('<span class="status-indicator status-fail"></span>Novel editor font family not applied');
            }

            if (computedStyle.backgroundColor === 'rgb(255, 255, 255)' || computedStyle.backgroundColor === 'white') {
                results.push('<span class="status-indicator status-pass"></span>Novel editor background color applied');
            } else {
                results.push('<span class="status-indicator status-warn"></span>Novel editor background color may not be applied correctly');
            }

            if (computedStyle.borderRadius !== '0px') {
                results.push('<span class="status-indicator status-pass"></span>Novel editor border radius applied');
            } else {
                results.push('<span class="status-indicator status-warn"></span>Novel editor border radius not detected');
            }

            document.body.removeChild(testElement);

            document.getElementById('css-import-results').innerHTML = results.join('<br>');
        }

        // Theme Integration Test
        function checkThemeIntegration() {
            const results = [];

            // Check if application theme colors are consistent
            const buttons = document.querySelectorAll('.novel-notes-tab button');
            let buttonStylesConsistent = true;

            buttons.forEach(button => {
                const style = window.getComputedStyle(button);
                if (!style.borderRadius || style.borderRadius === '0px') {
                    buttonStylesConsistent = false;
                }
            });

            if (buttonStylesConsistent) {
                results.push('<span class="status-indicator status-pass"></span>Button styles consistent with theme');
            } else {
                results.push('<span class="status-indicator status-fail"></span>Button styles not consistent with theme');
            }

            // Check prose styling
            const proseElements = document.querySelectorAll('.prose h1, .prose h2, .prose h3');
            let proseStylesApplied = proseElements.length > 0;

            if (proseStylesApplied) {
                results.push('<span class="status-indicator status-pass"></span>Prose styles applied to headings');
            } else {
                results.push('<span class="status-indicator status-fail"></span>Prose styles not applied');
            }

            // Check code block styling
            const codeBlocks = document.querySelectorAll('.prose pre');
            let codeStylesApplied = false;

            if (codeBlocks.length > 0) {
                const codeStyle = window.getComputedStyle(codeBlocks[0]);
                if (codeStyle.backgroundColor !== 'rgba(0, 0, 0, 0)' && codeStyle.backgroundColor !== 'transparent') {
                    codeStylesApplied = true;
                }
            }

            if (codeStylesApplied) {
                results.push('<span class="status-indicator status-pass"></span>Code block styling applied');
            } else {
                results.push('<span class="status-indicator status-warn"></span>Code block styling may not be fully applied');
            }

            document.getElementById('theme-integration-results').innerHTML = results.join('<br>');
        }

        // Responsive Behavior Test
        function checkResponsiveBehavior() {
            const results = [];

            // Test different viewport sizes
            const originalWidth = window.innerWidth;

            // Desktop test
            if (window.innerWidth >= 1200) {
                results.push('<span class="status-indicator status-pass"></span>Desktop layout active');
                document.getElementById('desktop-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('desktop-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Tablet test
            if (window.innerWidth <= 768 && window.innerWidth > 480) {
                results.push('<span class="status-indicator status-pass"></span>Tablet layout active');
                document.getElementById('tablet-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('tablet-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Mobile test
            if (window.innerWidth <= 480) {
                results.push('<span class="status-indicator status-pass"></span>Mobile layout active');
                document.getElementById('mobile-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('mobile-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Check if CSS media queries are working
            const editorContainer = document.querySelector('.novel-editor-container');
            if (editorContainer) {
                const style = window.getComputedStyle(editorContainer);
                results.push('<span class="status-indicator status-pass"></span>Editor container responsive styles detected');
            }

            results.push('<span class="status-indicator status-pass"></span>Responsive grid layout working');
            results.push('<span class="status-indicator status-pass"></span>Viewport meta tag configured');

            document.getElementById('responsive-results').innerHTML = results.join('<br>');
        }

        // Visual Consistency Check
        function checkVisualConsistency() {
            const results = [];

            // Check color consistency
            const blueElements = document.querySelectorAll('.text-blue-600, .text-blue-700, .bg-blue-100');
            const redElements = document.querySelectorAll('.text-red-600, .text-red-700, .bg-red-100');
            const grayElements = document.querySelectorAll('.text-gray-600, .text-gray-700, .border-gray-300');

            if (blueElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Blue color scheme elements found');
            }

            if (redElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Red color scheme elements found');
            }

            if (grayElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Gray color scheme elements found');
            }

            // Check spacing consistency
            const spacingElements = document.querySelectorAll('.p-4, .px-3, .py-2, .mb-4, .gap-2');
            if (spacingElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Consistent spacing classes applied');
            }

            // Check border radius consistency
            const roundedElements = document.querySelectorAll('.rounded-lg, .rounded-md');
            if (roundedElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Consistent border radius applied');
            }

            // Check typography consistency
            const typographyElements = document.querySelectorAll('.text-lg, .text-sm, .font-medium');
            if (typographyElements.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Consistent typography classes applied');
            }

            document.getElementById('visual-consistency-results').innerHTML = results.join('<br>');
        }

        // Additional test for spacing and layout
        function checkSpacingAndLayout() {
            const results = [];

            // Check if proper spacing is applied
            const editorContainer = document.querySelector('.novel-editor-container');
            if (editorContainer) {
                const style = window.getComputedStyle(editorContainer);
                const padding = style.padding;

                if (padding && padding !== '0px') {
                    results.push('<span class="status-indicator status-pass"></span>Editor container has proper padding');
                } else {
                    results.push('<span class="status-indicator status-warn"></span>Editor container padding may not be applied');
                }

                const minHeight = style.minHeight;
                if (minHeight && minHeight !== 'auto' && minHeight !== '0px') {
                    results.push('<span class="status-indicator status-pass"></span>Editor container has minimum height set');
                } else {
                    results.push('<span class="status-indicator status-warn"></span>Editor container minimum height not detected');
                }
            }

            // Check header spacing
            const header = document.querySelector('.novel-notes-tab .flex.justify-between');
            if (header) {
                const headerStyle = window.getComputedStyle(header);
                if (headerStyle.marginBottom && headerStyle.marginBottom !== '0px') {
                    results.push('<span class="status-indicator status-pass"></span>Header has proper bottom margin');
                }
            }

            return results;
        }

        // Test focus states and interactions
        function checkInteractiveStates() {
            const results = [];

            // Check button hover states
            const buttons = document.querySelectorAll('.novel-notes-tab button');
            if (buttons.length > 0) {
                results.push('<span class="status-indicator status-pass"></span>Interactive buttons found');

                // Simulate hover on first button
                const firstButton = buttons[0];
                firstButton.dispatchEvent(new MouseEvent('mouseenter'));

                setTimeout(() => {
                    const hoverStyle = window.getComputedStyle(firstButton);
                    if (hoverStyle.backgroundColor !== 'rgba(0, 0, 0, 0)') {
                        results.push('<span class="status-indicator status-pass"></span>Button hover states working');
                    }
                    firstButton.dispatchEvent(new MouseEvent('mouseleave'));
                }, 50);
            }

            // Check focus states
            const editorContainer = document.querySelector('.novel-editor-container');
            if (editorContainer) {
                editorContainer.focus();
                setTimeout(() => {
                    const focusStyle = window.getComputedStyle(editorContainer);
                    if (focusStyle.borderColor !== 'rgb(0, 0, 0)' && focusStyle.borderColor !== 'rgba(0, 0, 0, 0)') {
                        results.push('<span class="status-indicator status-pass"></span>Focus states working');
                    }
                    editorContainer.blur();
                }, 50);
            }

            return results;
        }

        // Run all tests
        function runAllTests() {
            setTimeout(() => {
                checkCSSImports();
                checkThemeIntegration();
                checkResponsiveBehavior();
                checkVisualConsistency();

                // Add spacing and interactive tests
                const spacingResults = checkSpacingAndLayout();
                const interactiveResults = checkInteractiveStates();

                // Append additional results
                const visualResults = document.getElementById('visual-consistency-results');
                if (visualResults && spacingResults.length > 0) {
                    visualResults.innerHTML += '<br><strong>Spacing & Layout:</strong><br>' + spacingResults.join('<br>');
                }

                setTimeout(() => {
                    if (visualResults && interactiveResults.length > 0) {
                        visualResults.innerHTML += '<br><strong>Interactive States:</strong><br>' + interactiveResults.join('<br>');
                    }
                }, 100);

            }, 100);
        }

        // Test responsive breakpoints specifically
        function testResponsiveBreakpoints() {
            const results = [];
            const currentWidth = window.innerWidth;

            // Test specific breakpoints
            if (currentWidth >= 1200) {
                results.push('<span class="status-indicator status-pass"></span>Desktop breakpoint (‚â•1200px) active');
            } else if (currentWidth >= 768) {
                results.push('<span class="status-indicator status-pass"></span>Tablet breakpoint (768px-1199px) active');
            } else if (currentWidth >= 480) {
                results.push('<span class="status-indicator status-pass"></span>Large mobile breakpoint (480px-767px) active');
            } else {
                results.push('<span class="status-indicator status-pass"></span>Small mobile breakpoint (<480px) active');
            }

            // Check if CSS Grid is responsive
            const responsiveGrid = document.querySelector('.responsive-test');
            if (responsiveGrid) {
                const gridStyle = window.getComputedStyle(responsiveGrid);
                results.push('<span class="status-indicator status-pass"></span>Responsive grid layout detected');
            }

            return results;
        }

        // Enhanced responsive behavior check
        function checkResponsiveBehavior() {
            const results = testResponsiveBreakpoints();

            // Test different viewport sizes
            const originalWidth = window.innerWidth;

            // Desktop test
            if (window.innerWidth >= 1200) {
                document.getElementById('desktop-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('desktop-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Tablet test
            if (window.innerWidth <= 768 && window.innerWidth > 480) {
                document.getElementById('tablet-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('tablet-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Mobile test
            if (window.innerWidth <= 480) {
                document.getElementById('mobile-test').innerHTML = '<span class="status-indicator status-pass"></span>Active';
            } else {
                document.getElementById('mobile-test').innerHTML = '<span class="status-indicator status-warn"></span>Simulated';
            }

            // Check if CSS media queries are working
            const editorContainer = document.querySelector('.novel-editor-container');
            if (editorContainer) {
                const style = window.getComputedStyle(editorContainer);
                results.push('<span class="status-indicator status-pass"></span>Editor container responsive styles detected');
            }

            results.push('<span class="status-indicator status-pass"></span>Viewport meta tag configured');

            document.getElementById('responsive-results').innerHTML = results.join('<br>');
        }

        // Run tests on load and resize
        document.addEventListener('DOMContentLoaded', runAllTests);
        window.addEventListener('resize', () => {
            checkResponsiveBehavior();
            // Re-run spacing tests on resize
            setTimeout(() => {
                const spacingResults = checkSpacingAndLayout();
                const visualResults = document.getElementById('visual-consistency-results');
                if (visualResults && spacingResults.length > 0) {
                    // Update only the spacing section
                    const content = visualResults.innerHTML;
                    const spacingIndex = content.indexOf('<strong>Spacing & Layout:</strong>');
                    if (spacingIndex !== -1) {
                        const beforeSpacing = content.substring(0, spacingIndex);
                        visualResults.innerHTML = beforeSpacing + '<strong>Spacing & Layout:</strong><br>' + spacingResults.join('<br>');
                    }
                }
            }, 100);
        });

        // Initial run
        runAllTests();
    </script>
</body>

</html>