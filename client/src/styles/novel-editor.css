/* Novel Editor Styles - Integrated with Application Theme and Optimized */
.novel-editor-container {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  background-color: #ffffff;
  /* Enable proper display and scrolling */
  display: block;
  position: relative;
  padding-bottom: 150px;
}

.novel-editor {
  outline: none;
  border: none;
  background: transparent;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 100%;
  height: auto;
  min-height: 350px;
}

.novel-editor .ProseMirror {
  outline: none;
  border: none;
  padding: 20px;
  min-height: 350px;
  color: #111827 !important;
  font-size: 14px !important;
  line-height: 1.6;
  background: transparent;
  /* Enable proper display and text wrapping */
  display: block !important;
  overflow-wrap: break-word;
  word-wrap: break-word;
  /* Optimize text rendering */
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Ensure proper height behavior */
  width: 100%;
  height: auto;
  /* Ensure visibility */
  visibility: visible !important;
  opacity: 1 !important;
  /* Prevent content from being hidden */
  overflow: visible;
  position: relative;
  z-index: 1;
  /* Ensure content is not clipped */
  contain: none;
  /* Force rendering */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Ensure ProseMirror is editable and visible */
.novel-editor .ProseMirror[contenteditable="true"] {
  cursor: text;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Ensure empty ProseMirror still shows */
.novel-editor .ProseMirror:empty {
  min-height: 350px;
}

.novel-editor .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #9ca3af;
  pointer-events: none;
  height: 0;
  user-select: none;
}

/* Ensure placeholder is visible */
.novel-editor .ProseMirror[data-placeholder]:empty::before {
  content: attr(data-placeholder);
  color: #9ca3af;
  pointer-events: none;
  position: absolute;
}

/* Prose styles for better typography - Integrated with Application Theme */
.novel-editor .prose {
  max-width: none;
  color: #111827;
}

.novel-editor .prose h1 {
  font-size: 1.875rem;
  font-weight: 700;
  line-height: 1.2;
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  color: #1f2937;
  border-bottom: 2px solid #f3f4f6;
  padding-bottom: 0.5rem;
}

.novel-editor .prose h2 {
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.3;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  color: #374151;
}

.novel-editor .prose h3 {
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.4;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
  color: #4b5563;
}

.novel-editor .prose p {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  line-height: 1.6;
  color: #374151 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure all paragraph content is visible */
.novel-editor .ProseMirror p {
  color: #374151 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  min-height: 1em;
}

/* Ensure text nodes are visible */
.novel-editor .ProseMirror * {
  color: inherit;
  visibility: visible;
}

/* Specific text visibility */
.novel-editor .ProseMirror p,
.novel-editor .ProseMirror h1,
.novel-editor .ProseMirror h2,
.novel-editor .ProseMirror h3,
.novel-editor .ProseMirror h4,
.novel-editor .ProseMirror h5,
.novel-editor .ProseMirror h6,
.novel-editor .ProseMirror li,
.novel-editor .ProseMirror blockquote,
.novel-editor .ProseMirror code,
.novel-editor .ProseMirror pre {
  visibility: visible !important;
  opacity: 1 !important;
}

.novel-editor .prose ul,
.novel-editor .prose ol {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  padding-left: 1.5rem;
}

/* Ensure bullet lists show bullets */
.novel-editor .prose ul {
  list-style-type: disc;
}

.novel-editor .prose ul ul {
  list-style-type: circle;
}

.novel-editor .prose ul ul ul {
  list-style-type: square;
}

/* Ensure ordered lists show numbers */
.novel-editor .prose ol {
  list-style-type: decimal;
}

.novel-editor .prose ol ol {
  list-style-type: lower-alpha;
}

.novel-editor .prose ol ol ol {
  list-style-type: lower-roman;
}

.novel-editor .prose li {
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
  color: #374151;
  display: list-item;
}

/* Override any Novel-specific list styling that might hide markers */
.novel-editor .prose ul[data-type="bulletList"] {
  list-style-type: disc !important;
}

.novel-editor .prose ol[data-type="orderedList"] {
  list-style-type: decimal !important;
}

.novel-editor .prose ul[data-type="bulletList"] li,
.novel-editor .prose ol[data-type="orderedList"] li {
  display: list-item !important;
  list-style-position: outside !important;
}

/* Ensure custom list classes also show markers */
.novel-editor .my-custom-bullet-list {
  list-style-type: disc !important;
  padding-left: 1.5rem !important;
}

.novel-editor .my-custom-ordered-list {
  list-style-type: decimal !important;
  padding-left: 1.5rem !important;
}

.novel-editor .my-custom-bullet-list li,
.novel-editor .my-custom-ordered-list li {
  display: list-item !important;
  list-style-position: outside !important;
  margin-left: 0 !important;
}

/* Additional specificity to override any global styles */
.novel-editor-container .novel-editor .prose .my-custom-bullet-list {
  list-style-type: disc !important;
}

.novel-editor-container .novel-editor .prose .my-custom-ordered-list {
  list-style-type: decimal !important;
}

.novel-editor-container .novel-editor .prose .my-custom-bullet-list li,
.novel-editor-container .novel-editor .prose .my-custom-ordered-list li {
  display: list-item !important;
  list-style-position: outside !important;
}

.novel-editor .prose blockquote {
  border-left: 4px solid #3b82f6;
  background-color: #f8fafc;
  padding: 1rem;
  margin: 1rem 0;
  font-style: italic;
  color: #1e40af;
  border-radius: 0 0.5rem 0.5rem 0;
}

.novel-editor .prose pre {
  background-color: #1f2937;
  color: #f9fafb;
  border-radius: 0.5rem;
  padding: 1rem;
  overflow-x: auto;
  margin: 1rem 0;
  border: 1px solid #374151;
}

.novel-editor .prose code {
  background-color: #f3f4f6;
  color: #1f2937;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  border: 1px solid #e5e7eb;
}

.novel-editor .prose pre code {
  background-color: transparent;
  color: inherit;
  padding: 0;
  border: none;
}

/* Code block with syntax highlighting using lowlight/highlight.js */
.novel-code-block,
.novel-editor .novel-code-block,
.novel-editor pre.hljs {
  background-color: #f9fafb !important; /* White background like LeetCode */
  font-family: 'Monaco', 'Menlo', 'Consolas', 'Courier New', monospace !important;
  font-size: 0.875rem !important;
  border-radius: 0.375rem !important;
  padding: 0.75rem !important;
  border: 1px solid #e5e7eb !important; /* Light gray border */
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  overflow-x: auto !important;
  display: block !important;
  margin: 0.5rem 0 !important;
  line-height: 1.6 !important;
}

/* Base color for code content - black default text like LeetCode */
.novel-code-block code,
.novel-editor .novel-code-block code {
  background-color: transparent !important;
  color: #000000 !important; /* Black default text like LeetCode */
  font-size: inherit !important;
  padding: 0 !important;
  border: none !important;
}

/* Syntax highlighting colors - Match LeetCode light theme exactly */

/* Keywords (def, class, if, for, return, in, or, and, range) - Purple/Magenta like LeetCode */
.novel-code-block .hljs-keyword,
.novel-code-block .hljs-selector-tag {
  color: #af00db !important; /* Purple/Magenta like LeetCode keywords */
  font-weight: normal;
}

/* Built-in functions (sum, len, print, etc.) - Blue like LeetCode */
.novel-code-block .hljs-built_in {
  color: #0000ff !important; /* Blue like LeetCode built-in functions (sum) */
}

/* Function names and class names - Black (default text) */
.novel-code-block .hljs-function,
.novel-code-block .hljs-title,
.novel-code-block .hljs-class,
.novel-code-block .hljs-title.class_,
.novel-code-block .hljs-title.function_ {
  color: #000000 !important; /* Black for function/class names like LeetCode */
}

/* Strings - Can be colored differently, but default to black for now */
.novel-code-block .hljs-string,
.novel-code-block .hljs-attr,
.novel-code-block .hljs-template-variable {
  color: #000000 !important; /* Black for strings (LeetCode doesn't highlight these) */
}

/* Numbers and numeric literals - Orange/Brown like LeetCode */
.novel-code-block .hljs-number {
  color: #cd6600 !important; /* Orange/Brown like LeetCode numbers */
}

/* Booleans (True, False, None) - Orange/Brown like LeetCode */
.novel-code-block .hljs-literal,
.novel-code-block .hljs-literal[data-value="true"],
.novel-code-block .hljs-literal[data-value="false"],
.novel-code-block .hljs-literal[data-value="null"],
.novel-code-block .hljs-built_in.hljs-literal {
  color: #cd6600 !important; /* Orange/Brown like LeetCode booleans */
}

/* Comments - Gray */
.novel-code-block .hljs-comment,
.novel-code-block .hljs-quote {
  color: #808080 !important; /* Gray for comments */
  font-style: italic;
}

/* Operators and punctuation - Black (default text like LeetCode) */
.novel-code-block .hljs-operator,
.novel-code-block .hljs-punctuation {
  color: #000000 !important; /* Black for operators like LeetCode */
}

/* Variables and parameters - Black (default text like LeetCode) */
.novel-code-block .hljs-variable,
.novel-code-block .hljs-params,
.novel-code-block .hljs-property {
  color: #000000 !important; /* Black for variables like LeetCode */
}

/* Meta tags and doctags */
.novel-code-block .hljs-meta,
.novel-code-block .hljs-doctag {
  color: #af00db !important; /* Purple like keywords */
}

/* Names, selectors - Black (default) */
.novel-code-block .hljs-name,
.novel-code-block .hljs-selector-class,
.novel-code-block .hljs-selector-id {
  color: #000000 !important; /* Black for names like LeetCode */
}

/* Additional language-specific tokens */
.novel-code-block .hljs-tag,
.novel-code-block .hljs-deletion {
  color: #000000 !important; /* Black (default) */
}

.novel-code-block .hljs-addition,
.novel-code-block .hljs-symbol {
  color: #000000 !important; /* Black (default) */
}

.novel-code-block .hljs-section,
.novel-code-block .hljs-type {
  color: #af00db !important; /* Purple like keywords */
}

.novel-code-block .hljs-regexp,
.novel-code-block .hljs-link {
  color: #000000 !important; /* Black (default) */
}

.novel-code-block .hljs-emphasis {
  font-style: italic;
}

.novel-code-block .hljs-strong {
  font-weight: bold;
}

/* Ensure all syntax elements have transparent background */
.novel-code-block .hljs-keyword,
.novel-code-block .hljs-built_in,
.novel-code-block .hljs-function,
.novel-code-block .hljs-title,
.novel-code-block .hljs-string,
.novel-code-block .hljs-attr,
.novel-code-block .hljs-number,
.novel-code-block .hljs-comment,
.novel-code-block .hljs-variable,
.novel-code-block .hljs-params,
.novel-code-block .hljs-operator,
.novel-code-block .hljs-tag,
.novel-code-block .hljs-deletion,
.novel-code-block .hljs-addition,
.novel-code-block .hljs-type,
.novel-code-block .hljs-section {
  background-color: transparent !important;
}

/* Remove any default highlight.js backgrounds */
.novel-code-block .hljs {
  background: transparent !important;
}

/* Make sure plain text in code blocks is visible */
.novel-code-block,
.novel-code-block * {
  tab-size: 2;
  -moz-tab-size: 2;
  -o-tab-size: 2;
}

/* Remove focus outlines from code blocks (like LeetCode) */
.novel-code-block:focus,
.novel-code-block:focus-within,
.novel-code-block *:focus,
.novel-code-block *:focus-within {
  outline: none !important;
  border-color: #e5e7eb !important; /* Keep the same border color */
  box-shadow: none !important;
}

/* Task list styles */
.novel-editor .prose ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
}

.novel-editor .prose ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.novel-editor .prose ul[data-type="taskList"] li input[type="checkbox"] {
  margin: 0;
  margin-top: 0.125rem;
}

.novel-editor .prose ul[data-type="taskList"] li[data-checked="true"] {
  text-decoration: line-through;
  opacity: 0.6;
}

/* Command menu styles - Integrated with Application Theme */
.novel-editor [cmdk-root] {
  background: white;
  border-radius: 0.5rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  z-index: 50;
  min-width: 300px;
}

.novel-editor [cmdk-input] {
  border: none;
  outline: none;
  padding: 0.75rem;
  font-size: 0.875rem;
  width: 100%;
  background: transparent;
  color: #374151;
}

.novel-editor [cmdk-input]::placeholder {
  color: #9ca3af;
}

.novel-editor [cmdk-list] {
  max-height: 300px;
  overflow-y: auto;
  padding: 0.25rem;
}

.novel-editor [cmdk-item] {
  padding: 0.75rem;
  border-radius: 0.375rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  transition: all 0.15s ease;
  color: #374151;
  outline: none;
}

.novel-editor [cmdk-item]:hover,
.novel-editor [cmdk-item][aria-selected="true"],
.novel-editor [cmdk-item][data-selected="true"] {
  background-color: #f0f9ff !important;
  color: #1e40af !important;
}

.novel-editor [cmdk-item] .font-medium {
  font-weight: 500;
}

.novel-editor [cmdk-item] .text-xs {
  font-size: 0.75rem;
  color: #6b7280;
}

.novel-editor [cmdk-empty] {
  padding: 1rem;
  text-align: center;
  color: #6b7280;
  font-size: 0.875rem;
}

/* Enhanced command menu item styling */
.novel-editor [cmdk-item] svg {
  flex-shrink: 0;
  width: 18px;
  height: 18px;
}

.novel-editor [cmdk-item] .command-content {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.125rem;
}

.novel-editor [cmdk-item] .command-title {
  font-weight: 500;
  font-size: 0.875rem;
}

.novel-editor [cmdk-item] .command-description {
  font-size: 0.75rem;
  color: #6b7280;
  line-height: 1.2;
}

/* Enhanced Bubble menu styles - Matching expected design */
.novel-editor .bubble-menu {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem;
  z-index: 40;
  min-height: 44px;
}

.novel-editor .bubble-menu button {
  padding: 0.5rem;
  border: none;
  background: transparent;
  border-radius: 0.375rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  color: #6b7280;
  min-width: 32px;
  min-height: 32px;
  font-size: 14px;
}

.novel-editor .bubble-menu button:hover {
  background-color: #f3f4f6;
  color: #374151;
}

.novel-editor .bubble-menu button.is-active {
  background-color: #dbeafe;
  color: #1d4ed8;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

/* Enhanced bubble menu item styling */
.novel-editor .bubble-menu .flex.items-center.gap-1 {
  padding: 0.375rem 0.5rem;
  border-radius: 0.375rem;
  transition: all 0.15s ease;
  cursor: pointer;
  white-space: nowrap;
}

.novel-editor .bubble-menu .flex.items-center.gap-1:hover {
  background-color: #f3f4f6;
}

/* Separator styling */
.novel-editor .bubble-menu .h-6.w-px {
  background-color: #e5e7eb;
  margin: 0 0.25rem;
}

/* Text style dropdown styling */
.novel-editor .bubble-menu .relative {
  position: relative;
}

/* Ask AI button styling */
.novel-editor .bubble-menu button:first-child {
  background-color: #f0f9ff;
  color: #1e40af;
  font-weight: 500;
}

.novel-editor .bubble-menu button:first-child:hover {
  background-color: #dbeafe;
  color: #1d4ed8;
}

/* Color picker button styling */
.novel-editor .bubble-menu .text-xs {
  font-size: 12px;
  font-weight: 500;
}

/* Link button active state */
.novel-editor .bubble-menu button[data-active="true"] {
  background-color: #dbeafe;
  color: #1d4ed8;
}

/* Focus styles */
.novel-editor .ProseMirror:focus {
  outline: none;
}

/* Optimized Placeholder styles - Integrated with Application Theme */
.novel-editor .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #9ca3af;
  pointer-events: none;
  height: 0;
  font-style: italic;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}


/* Responsive design for Novel editor */
@media (max-width: 768px) {
  .novel-editor-container {
    padding: 12px;
    border-radius: 6px;
  }

  .novel-editor .ProseMirror {
    padding: 16px;
    min-height: 300px;
    font-size: 14px;
  }

  .novel-editor .prose h1 {
    font-size: 1.5rem;
    margin-top: 1rem;
  }

  .novel-editor .prose h2 {
    font-size: 1.25rem;
    margin-top: 1rem;
  }

  .novel-editor .prose h3 {
    font-size: 1.125rem;
    margin-top: 0.75rem;
  }

  .novel-editor [cmdk-root] {
    max-width: calc(100vw - 32px);
  }

  .novel-editor .bubble-menu {
    max-width: calc(100vw - 32px);
    flex-wrap: wrap;
  }
}

@media (max-width: 480px) {
  .novel-editor-container {
    padding: 8px;
    border-radius: 4px;
  }

  .novel-editor .ProseMirror {
    padding: 12px;
    min-height: 250px;
    font-size: 13px;
  }

  .novel-editor .prose h1 {
    font-size: 1.375rem;
  }

  .novel-editor .prose h2 {
    font-size: 1.125rem;
  }

  .novel-editor .prose h3 {
    font-size: 1rem;
  }

  .novel-editor [cmdk-item] {
    padding: 0.5rem;
    gap: 0.5rem;
  }

  .novel-editor .bubble-menu button {
    min-width: 28px;
    min-height: 28px;
    padding: 0.375rem;
  }
}

/* Application Theme Integration Overrides */
.novel-notes-tab {
  /* Ensure consistent font family with main application */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  /* Ensure proper scrolling behavior */
  overflow: visible;
  /* Ensure proper display within tab container */
  display: flex !important;
  flex-direction: column;
  width: 100%;
  height: 100%;
  min-height: 400px;
  /* Ensure visibility */
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure integration class displays properly */
.novel-notes-integration {
  display: flex !important;
  flex-direction: column;
  width: 100%;
  height: 100%;
  flex: 1;
  min-height: 400px;
}

/* Ensure tab-content container with NovelNotesTab displays properly */
.tab-content .novel-notes-tab {
  display: flex !important;
  flex: 1;
  flex-direction: column;
  visibility: visible !important;
  opacity: 1 !important;
}

.tab-content .novel-notes-integration {
  display: flex !important;
  flex: 1;
}

/* Override any conflicting styles */
#notes-tab .novel-notes-tab {
  display: flex !important;
  flex-direction: column;
  width: 100%;
  height: 100%;
  visibility: visible !important;
  opacity: 1 !important;
}

#notes-tab .novel-notes-integration {
  display: flex !important;
  flex-direction: column;
  width: 100%;
  height: 100%;
}

/* Ensure active tab content shows novel notes tab */
.tab-content.active .novel-notes-tab {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure prose colors match the application theme */
.novel-editor .prose h1 {
  color: #1f2937;
  /* Match .text-gray-900 */
}

.novel-editor .prose h2,
.novel-editor .prose h3,
.novel-editor .prose h4,
.novel-editor .prose h5,
.novel-editor .prose h6 {
  color: #374151;
  /* Match .text-gray-700 */
}

.novel-editor .prose p,
.novel-editor .prose li {
  color: #374151;
  /* Match main application text color */
}

/* Enhanced text formatting styles */
.novel-editor .prose strong,
.novel-editor .prose .novel-bold {
  font-weight: 600;
  color: #1f2937;
}

.novel-editor .prose em,
.novel-editor .prose .novel-italic {
  font-style: italic;
}

.novel-editor .prose .novel-strike {
  text-decoration: line-through;
  text-decoration-color: #6b7280;
}

.novel-editor .prose .novel-inline-code {
  background-color: #f3f4f6;
  color: #1f2937;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  border: 1px solid #e5e7eb;
}

.novel-editor .prose .novel-heading {
  font-weight: 600;
  line-height: 1.25;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.novel-editor .prose .novel-blockquote {
  border-left: 4px solid #3b82f6;
  background-color: #f8fafc;
  padding: 1rem;
  margin: 1rem 0;
  font-style: italic;
  color: #1e40af;
  border-radius: 0 0.5rem 0.5rem 0;
}

/* Match blockquote styling with application theme */
.novel-editor .prose blockquote {
  border-left-color: #3b82f6;
  /* Match primary blue */
  background-color: #f8fafc;
  /* Light blue background */
  color: #1e40af;
  /* Match .text-blue-800 */
}

/* Code styling to match application theme */
.novel-editor .prose code {
  background-color: #f3f4f6;
  /* Match .bg-gray-100 */
  color: #1f2937;
  /* Match .text-gray-900 */
  border: 1px solid #e5e7eb;
  /* Match border colors */
}

.novel-editor .prose pre {
  background-color: #1f2937;
  /* Dark background for code blocks */
  color: #f9fafb;
  /* Light text */
  border: 1px solid #374151;
}

/* Command menu integration with application theme */
.novel-editor [cmdk-root] {
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  border: 1px solid #e5e7eb;
}

.novel-editor [cmdk-item]:hover,
.novel-editor [cmdk-item][aria-selected="true"] {
  background-color: #f0f9ff;
  /* Light blue hover */
  color: #1e40af;
  /* Blue text */
}

/* Bubble menu integration */
.novel-editor .bubble-menu {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border: 1px solid #e5e7eb;
}

.novel-editor .bubble-menu button:hover {
  background-color: #f3f4f6;
  /* Match .bg-gray-100 */
  color: #374151;
  /* Match .text-gray-700 */
}

.novel-editor .bubble-menu button.is-active {
  background-color: #dbeafe;
  /* Match .bg-blue-100 */
  color: #1d4ed8;
  /* Match .text-blue-700 */
}

/* Task list styling to match application theme */
.novel-editor .prose ul[data-type="taskList"] li input[type="checkbox"] {
  accent-color: #3b82f6;
  /* Primary blue for checkboxes */
}

.novel-editor .prose ul[data-type="taskList"] li[data-checked="true"] {
  color: #6b7280;
  /* Match .text-gray-500 for completed items */
}

/* Link styling to match application theme */
.novel-editor .prose a {
  color: #2563eb;
  /* Match .text-blue-600 */
  text-decoration: underline;
  text-underline-offset: 3px;
}

.novel-editor .prose a:hover {
  color: #1d4ed8;
  /* Match .text-blue-700 */
}

/* Table styles for pasted and created tables */
.novel-editor .prose table,
.novel-editor .novel-table {
  border-collapse: collapse;
  table-layout: auto;
  width: 100%;
  margin: 1.5rem 0;
  overflow: hidden;
  border-radius: 0.5rem;
  border: 1px solid #e5e7eb;
}

.novel-editor .prose table th,
.novel-editor .prose table td,
.novel-editor .novel-table-header,
.novel-editor .novel-table-cell {
  border: 1px solid #e5e7eb;
  padding: 0.75rem 1rem;
  text-align: left;
  vertical-align: top;
}

.novel-editor .prose table th,
.novel-editor .novel-table-header {
  background-color: #f9fafb;
  font-weight: 600;
  color: #1f2937;
  border-bottom: 2px solid #e5e7eb;
}

.novel-editor .prose table td,
.novel-editor .novel-table-cell {
  background-color: #ffffff;
  color: #374151;
}

.novel-editor .prose table tr:hover td,
.novel-editor .novel-table-row:hover .novel-table-cell {
  background-color: #f8fafc;
}

/* Table cell selection */
.novel-editor .ProseMirror .selectedCell {
  background-color: #dbeafe;
  border: 2px solid #3b82f6;
  position: relative;
}

/* Merged cell styling */
.novel-editor .prose table td[colspan],
.novel-editor .prose table th[colspan],
.novel-editor .prose table td[rowspan],
.novel-editor .prose table th[rowspan] {
  background-color: #f0f9ff;
  font-weight: 500;
}

/* Table resize handle */
.novel-editor .tableWrapper {
  overflow-x: auto;
  margin: 1rem 0;
}

.novel-editor .resize-cursor {
  cursor: col-resize;
}

/* Column resize handle styling */
.novel-editor .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 4px;
  background-color: #3b82f6;
  cursor: col-resize;
  opacity: 0;
  transition: opacity 0.2s;
}

.novel-editor .prose table th:hover .column-resize-handle,
.novel-editor .prose table td:hover .column-resize-handle {
  opacity: 1;
}

/* Active header cells - different styling */
.novel-editor .prose table th[data-active="true"],
.novel-editor .novel-table-header[data-active="true"] {
  background-color: #e0e7ff;
  color: #1e40af;
}

/* Editable cell focus state */
.novel-editor .ProseMirror table td:focus,
.novel-editor .ProseMirror table th:focus {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
  background-color: #eff6ff;
}

/* Table controls - better visual hierarchy */
.novel-editor .prose table {
  position: relative;
}

/* Ensure table content is visible */
.novel-editor .prose table *,
.novel-editor .novel-table * {
  visibility: visible !important;
  opacity: 1 !important;
}

/* Table border styling for better visibility */
.novel-editor .prose table,
.novel-editor .novel-table {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

/* Alternate row coloring for better readability */
.novel-editor .prose table tr:nth-child(even) td {
  background-color: #f9fafb;
}

.novel-editor .prose table tr:nth-child(odd) td {
  background-color: #ffffff;
}

/* Keep hover effect on top of alternating colors */
.novel-editor .prose table tr:hover td {
  background-color: #f0f9ff !important;
}

/* Empty cell placeholder */
.novel-editor .ProseMirror table td:empty::before,
.novel-editor .ProseMirror table th:empty::before {
  content: '\00a0';
  color: transparent;
}

/* Table wrapper for responsive scrolling */
.novel-editor .tableWrapper {
  position: relative;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Table responsive behavior */
@media (max-width: 768px) {
  .novel-editor .prose table,
  .novel-editor .novel-table {
    font-size: 0.875rem;
  }
  
  .novel-editor .prose table th,
  .novel-editor .prose table td,
  .novel-editor .novel-table-header,
  .novel-editor .novel-table-cell {
    padding: 0.5rem 0.75rem;
  }
}

/* Ensure proper spacing matches application */
.novel-editor .ProseMirror {
  padding: 20px 20px 28px 30px;
  /* Match notes-editor padding from main app */
}

/* Match the application's scrollbar styling */
.novel-editor .ProseMirror::-webkit-scrollbar {
  width: 8px;
}

.novel-editor .ProseMirror::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.novel-editor .ProseMirror::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.novel-editor .ProseMirror::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Dark mode support (if needed in the future) */
@media (prefers-color-scheme: dark) {
  .novel-editor-container {
    background-color: #1f2937;
    border-color: #374151;
  }

  .novel-editor .ProseMirror {
    color: #f9fafb;
  }

  .novel-editor .prose h1,
  .novel-editor .prose h2,
  .novel-editor .prose h3 {
    color: #f9fafb;
  }

  .novel-editor .prose p,
  .novel-editor .prose li {
    color: #e5e7eb;
  }

  .novel-editor .prose blockquote {
    background-color: #374151;
    color: #93c5fd;
    border-left-color: #60a5fa;
  }

  .novel-editor .prose code {
    background-color: #374151;
    color: #f9fafb;
    border-color: #4b5563;
  }
}